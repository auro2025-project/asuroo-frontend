"use client";

import React, { useState, useEffect, useRef } from "react";

const AsurLogoAnimation = () => {
  const [currentTextIndex, setCurrentTextIndex] = useState(-1);
  const [isAnimating, setIsAnimating] = useState(false);
  const [lastText, setLastText] = useState("");
  const intervalRef = useRef<NodeJS.Timeout | null>(null);

  const textSequence = [
    { id: "A", text: "A" },
    { id: "S", text: "Simple" },
    { id: "U", text: "Unique" },
    { id: "R", text: "Rewarding" },
    { id: "mag", text: "search" },
  ];

  // Highlight SVG path by ID
  const highlightSVGElement = (elementId: string) => {
    const element = document.getElementById(elementId);
    if (!element) return;

    element.style.transition = "all 0.7s ease-in-out";
    element.style.fill = "#ff0083";
    element.style.transform = "translateY(-10px) scale(1.1)";
    element.style.filter =
      "brightness(1.2) drop-shadow(0 0 8px rgba(255,0,131,0.4))";
  };

  const removeHighlightFromSVGElement = (elementId: string) => {
    const element = document.getElementById(elementId);
    if (!element) return;

    element.style.transition = "all 0.7s ease-in-out";
    element.style.fill = "#30222f"; // original color
    element.style.transform = "translateY(0) scale(1)";
    element.style.filter = "none";
  };

  const removeAllHighlights = () => {
    ["A", "S", "U", "R", "mag"].forEach((id) =>
      removeHighlightFromSVGElement(id)
    );
  };

  const runAnimationCycle = () => {
    setIsAnimating(true);
    setCurrentTextIndex(0);
  };

  // Animate text & SVG highlight
  useEffect(() => {
    if (currentTextIndex >= 0 && currentTextIndex < textSequence.length) {
      if (currentTextIndex > 0) {
        removeHighlightFromSVGElement(textSequence[currentTextIndex - 1].id);
      }

      const currentItem = textSequence[currentTextIndex];
      highlightSVGElement(currentItem.id);
      setLastText(currentItem.text);

      const timer = setTimeout(() => {
        if (currentTextIndex < textSequence.length - 1) {
          setCurrentTextIndex(currentTextIndex + 1);
        } else {
          setTimeout(() => {
            removeAllHighlights();
            setCurrentTextIndex(-1);
            setIsAnimating(false);
          }, 1500);
        }
      }, 1400);

      return () => clearTimeout(timer);
    }
  }, [currentTextIndex]);

  useEffect(() => {
    removeAllHighlights();

    const initialTimer = setTimeout(() => {
      runAnimationCycle();
    }, 800);

    intervalRef.current = setInterval(() => {
      runAnimationCycle();
    }, 9000);

    return () => {
      clearTimeout(initialTimer);
      if (intervalRef.current) clearInterval(intervalRef.current);
      removeAllHighlights();
    };
  }, []);

  return (
    <div className="bg-white flex flex-col items-center justify-center pt-[100px] md:pt-[200px] lg:pt-[150px] pb-[50px]">
      <div className="flex flex-col items-center max-w-4xl w-full px-4">
        {/* Logo Container */}
        <div className="relative w-full max-w-[200px] sm:max-w-[300px]">
          <svg
            className="w-full h-auto overflow-visible"
            viewBox="0 0 4474.09 949.04"
            xmlns="http://www.w3.org/2000/svg"
          >
            {/* ================= YOUR SVG PATHS ================= */}
            <g id="mag">
              <g>
                <g>
                  <path d="m3124.18,69.67c-191.98,0-347.61,155.63-347.61,347.61s155.63,347.61,347.61,347.61,347.61-155.63,347.61-347.61-155.63-347.61-347.61-347.61Zm121.5,577.15c-124,68.95-280.41,24.32-349.36-99.68-68.95-124-24.33-280.42,99.67-349.36,124-68.95,280.42-24.32,349.37,99.68,68.95,124,24.32,280.41-99.68,349.36Z" style={{fill: '#ff0083', strokeWidth: '0px'}}/>
                  <path d="m4325.67,790.7l4.49-2.87-99.23-155.26c91.78-113.14,105.61-276.7,22.86-406.19-103.38-161.76-318.33-209.09-480.09-105.71-161.77,103.38-209.09,318.33-105.71,480.09,89.94,140.73,264.3,194.83,414.63,138.46l93.84,146.84,4.49-2.87c22.81,32.97,58.28,39.01,89.64,28.88,2.87-.29,5.72-1.22,8.31-2.88l.98-.63c10.12-4.42,19.59-10.53,27.81-17.92,1.59-1.11,2.96-2.43,4.09-3.89,24.1-24.27,34.96-60.25,13.89-96.04Zm-582.04-232.74c-76.4-119.55-41.43-278.4,78.12-354.81,119.55-76.41,278.4-41.43,354.81,78.12,76.4,119.55,41.43,278.4-78.13,354.81-119.55,76.4-278.4,41.42-354.8-78.13Z" style={{fill: '#ff0083', strokeWidth: '0px'}}/>
                </g>
                <path d="m3612.51,381.89c-19.81-17.16-74.69-53.72-136.99,0h-63.73v95.39h31.43c9.45-46.81,49.97-82,98.54-82s89.09,35.19,98.54,82h31.43v-95.39h-59.22Z" fill="#ff0083" strokeWidth = "0px"/>
              </g>
              <g>
                <path d="m3840.39,304.69c2.82-2.96,5.76-5.8,8.79-8.53,2.46-2.22,4.98-4.36,7.55-6.44.67-.54,1.37-1.06,2.03-1.62.62-.52-2.37,1.78-.06.05,1.81-1.35,3.63-2.69,5.48-3.99,7.85-5.51,16.09-10.45,24.67-14.74,2.26-1.13,4.55-2.22,6.85-3.26,1.18-.53,2.37-1.06,3.57-1.57-2.38,1,1.33-.51,2.08-.79,5.63-2.19,11.38-4.1,17.2-5.72,6.23-1.73,12.56-3.13,18.94-4.17.76-.13,1.53-.24,2.29-.36-.06,0,2.47-.34,1.17-.17s1.27-.14,1.2-.14c.79-.08,1.59-.17,2.38-.25,3.51-.36,7.03-.61,10.55-.76,14.24-.6,26.75.34,39.09,2.82,5.91,1.19,11.76,2.68,17.52,4.45,2.85.88,5.68,1.82,8.48,2.84,1.26.46,2.51.93,3.76,1.41.62.24,1.23.49,1.85.73.25.1,2.75,1.12,1.29.51-1.22-.51,1.86.82,2.39,1.06,1.15.51,2.29,1.04,3.43,1.58,2.57,1.21,5.11,2.48,7.62,3.81,4.17,2.2,8.25,4.55,12.25,7.04s8.07,5.25,11.96,8.09c.84.62,1.67,1.26,2.52,1.87,1.96,1.44-2.39-1.91.08.07,1.51,1.21,3.01,2.41,4.49,3.66,3.71,3.12,7.3,6.4,10.72,9.84,13.18,13.25,33.69-7.25,20.51-20.51-25.1-25.24-58.1-43.75-92.54-52.45-52.69-13.32-109.4-3.5-154.92,26.02-12.86,8.34-25.11,18.04-35.7,29.14-5.4,5.67-5.63,14.88,0,20.51s15.08,5.69,20.51,0h0Z" fill= "#30222f" strokeWidth = "0px"/>
                <path d="m3828.78,310.64c7.84,0,14.5-6.66,14.5-14.5s-6.64-14.5-14.5-14.5-14.5,6.66-14.5,14.5,6.64,14.5,14.5,14.5h0Z" fill= "#30222f" strokeWidth = "0px"/>
                <path d="m4095.26,308.52c7.84,0,14.5-6.66,14.5-14.5s-6.64-14.5-14.5-14.5-14.5,6.66-14.5,14.5,6.64,14.5,14.5,14.5h0Z" fill= "#30222f" strokeWidth = "0px"/>
              </g>
              <g>
                <path d="m2987.45,307.4c2.82-2.96,5.76-5.8,8.79-8.53,2.46-2.22,4.98-4.36,7.55-6.44.67-.54,1.37-1.06,2.03-1.62.62-.52-2.37,1.78-.06.05,1.81-1.35,3.63-2.69,5.48-3.99,7.85-5.51,16.09-10.45,24.67-14.74,2.26-1.13,4.55-2.22,6.85-3.26,1.18-.53,2.37-1.06,3.57-1.57-2.38,1,1.33-.51,2.08-.79,5.63-2.19,11.38-4.1,17.2-5.72,6.23-1.73,12.56-3.13,18.94-4.17.76-.13,1.53-.24,2.29-.36-.06,0,2.47-.34,1.17-.17s1.27-.14,1.2-.14c.79-.08,1.59-.17,2.38-.25,3.51-.36,7.03-.61,10.55-.76,14.24-.6,26.75.34,39.09,2.82,5.91,1.19,11.76,2.68,17.52,4.45,2.85.88,5.68,1.82,8.48,2.84,1.26.46,2.51.93,3.76,1.41.62.24,1.23.49,1.85.73.25.1,2.75,1.12,1.29.51-1.22-.51,1.86.82,2.39,1.06,1.15.51,2.29,1.04,3.43,1.58,2.57,1.21,5.11,2.48,7.62,3.81,4.17,2.2,8.25,4.55,12.25,7.04s8.07,5.25,11.96,8.09c.84.62,1.67,1.26,2.52,1.87,1.96,1.44-2.39-1.91.08.07,1.51,1.21,3.01,2.41,4.49,3.66,3.71,3.12,7.3,6.4,10.72,9.84,13.18,13.25,33.69-7.25,20.51-20.51-25.1-25.24-58.1-43.75-92.54-52.45-52.69-13.32-109.4-3.5-154.92,26.02-12.86,8.34-25.11,18.04-35.7,29.14-5.4,5.67-5.63,14.88,0,20.51s15.08,5.69,20.51,0h0Z" fill= "#30222f" strokeWidth = "0px"/>
                <path d="m2975.84,313.35c7.84,0,14.5-6.66,14.5-14.5s-6.64-14.5-14.5-14.5-14.5,6.66-14.5,14.5,6.64,14.5,14.5,14.5h0Z" fill= "#30222f" strokeWidth = "0px"/>
                <path d="m3242.32,311.23c7.84,0,14.5-6.66,14.5-14.5s-6.64-14.5-14.5-14.5-14.5,6.66-14.5,14.5,6.64,14.5,14.5,14.5h0Z" fill= "#30222f" strokeWidth = "0px"/>
              </g>
            </g>
            
            <path id="S" d="m1280.17,384.47c-23.08-18.53-63.61-35.1-121.56-49.72-64.73-16.84-107.21-30.6-127.47-41.29l-5.07-9.27,7.6-14.32c10.68-4.48,21.38-6.74,32.08-6.74,13.51,0,32.08,3.66,55.72,10.97,46.14,14.07,77.1,21.1,92.86,21.1,23.07,0,42.07-7.73,56.98-23.21,14.91-15.47,22.37-34.74,22.37-57.83,0-42.21-23.64-74-70.91-95.39-34.9-15.75-76.82-23.64-125.79-23.64-68.67,0-127.76,16.86-177.28,50.56-56.28,38.2-84.42,90.17-84.42,155.89,0,69.66,34.61,119.37,103.84,149.14,62.47,19.1,125.22,38.2,188.25,57.3l8.44,14.32-7.6,14.33c-14.08,8.43-28.7,12.63-43.9,12.63-16.88,0-39.4-3.93-67.54-11.82-56.28-15.75-93.15-23.64-110.59-23.64-20.83,0-38.41,8.59-52.76,25.75-14.35,17.17-21.53,36.17-21.53,56.98,0,48.96,30.1,83.87,90.33,104.68,38.83,13.51,88.92,20.26,150.26,20.26,68.09,0,127.18-17.69,177.28-53.09,56.27-39.87,84.42-92.4,84.42-157.57,0-56.17-18.02-98.3-54.03-126.39Z" fill= "#30222f" strokeWidth = "0px"/>
            
            <path id="U" d="m1947.93,92.61c-38.83,0-65.85,14.33-81.04,42.98-11.82,22.48-17.73,57.3-17.73,104.48,0,15.74.84,40.18,2.53,73.31,1.69,33.15,2.53,57.87,2.53,74.16,0,53.37-6.2,92.14-18.57,116.29-16.33,32.02-46.15,48.03-89.49,48.03s-73.45-15.45-90.33-46.35c-12.95-23.58-19.41-60.39-19.41-110.38,0-12.91,1.4-45.21,4.22-96.91,1.12-20.78,1.69-39.6,1.69-56.46,0-47.18-6.2-82.57-18.57-106.17-15.2-28.65-41.93-42.98-80.2-42.98-27.58,0-50.8,9.98-69.65,29.93-18.86,19.96-28.28,43.42-28.28,70.4v245.33c0,87.11,28.14,156.24,84.42,207.39,54.58,49.46,126.34,74.18,215.27,74.18s160.67-24.72,215.27-74.18c56.84-51.15,85.27-120.28,85.27-207.39v-245.33c0-26.97-9.71-50.44-29.12-70.4-19.42-19.95-42.36-29.93-68.8-29.93Z" fill= "#30222f" strokeWidth = "0px"/>
            
            <path id="R" d="m2635.93,540.87c-19.14-24.19-38.28-48.4-57.4-72.6,30.39-24.19,52.62-47.55,66.69-70.07,16.88-27.01,25.32-57.96,25.32-92.86,0-64.71-21.39-115.65-64.16-152.8-39.97-34.89-92.58-52.34-157.86-52.34h-184.88c-30.96,0-55.16,9.31-72.6,27.94-17.45,18.62-26.17,43.73-26.17,75.33v419.85c0,27.09,9.49,50.52,28.45,70.26,18.97,19.76,41.58,29.63,67.8,29.63,31.23,0,54.67-9.35,70.3-28.06,18.97-22.66,28.45-63.75,28.45-123.27v-91.8c16.83,29.27,33.95,58.25,51.35,86.95,28.07,46.72,53.04,81.89,74.94,105.52,31.42,33.77,60.89,50.65,88.4,50.65s49.11-9.84,68.2-29.55c19.07-19.69,28.62-42.49,28.62-68.38,0-23.64-11.82-51.77-35.45-84.42Zm-170.1-208.94c-6.48,8.16-14.77,12.24-24.9,12.24h-81.04v-73.45h84.42c8.44,0,15.75,3.38,21.95,10.13,6.18,6.75,9.28,14.35,9.28,22.79,0,10.7-3.24,20.13-9.71,28.28Z" fill= "#30222f" strokeWidth = "0px"/>
            
            <g >
              <path id="A" d="m740.28,574.92c-.47-1.44-.95-2.94-1.43-4.42-5.39-19.88-12.83-42.97-22.33-69.28-14.07-38.83-36.72-94.26-67.96-166.3-31.23-72.03-49.68-115.36-55.29-130-12.95-32.63-32.08-58.67-57.41-78.09-25.32-19.42-55.16-29.12-89.48-29.12-.05,0-.11,0-.16,0s-.1,0-.16,0c-34.9,0-64.87,9.58-89.91,28.7-25.05,19.14-44.04,45.31-56.98,78.51-2.82,7.89-21.67,51.79-56.56,131.69-30.96,71.48-53.47,126.63-67.54,165.46-8.87,24.49-15.87,46.24-21.05,65.32-.83,2.57-1.64,5.09-2.44,7.55-15.4,47.62-18.44,82.95-9.13,105.99,7.67,19.01,24,32.56,48.99,40.64,20.98,6.78,41.63,4.74,61.91-6.16,20.29-10.89,33.94-27.18,40.95-48.86l5.74-18.71,6.53-18c8.08-32.84,29.8-58.58,105.8-63.17l3.93-3.75c-24.25-11.29-41.07-35.86-41.07-64.37,0-39.2,31.78-70.98,70.98-70.98s70.98,31.78,70.98,70.98c0,28.51-16.82,53.08-41.07,64.37l3.93,3.75c77.16,4.65,98.36,31.12,106.16,64.69-.02-.48-.03-.78-.03-.78l1.34,3.27,10.03,32.71c7.01,21.68,20.66,37.97,40.95,48.86,20.29,10.9,40.93,12.95,61.91,6.16,24.99-8.08,41.33-21.63,48.99-40.64,9.32-23.04,6.27-58.37-9.13-105.99Z" fill= "#30222f" strokeWidth = "0px"/>
            </g>

          </svg>
        </div>

        {/* Animated Text */}
        <div className="relative flex items-center justify-center ">
          <div
            className={`text-4xl md:text-5xl lg:text-6xl font-bold text-pink-500 transition-all duration-700 ease-out transform ${
              currentTextIndex >= 0
                ? "opacity-100 scale-110 translate-y-0"
                : "opacity-100 scale-90 translate-y-2"
            }`}
          >
            {lastText}
          </div>
        </div>

        {/* Static Text */}
        <div
          className='text-2xl md:text-3xl lg:text-4xl font-semibold text-primaryblack transition-all duration-1000 mt-4'
        >
          insurance platform&apos;s
        </div>
      </div>
    </div>
  );
};

export default AsurLogoAnimation;
